#include <cstdlib>
#include <iostream>
#include <sstream>
#include <string>
#include <unistd.h>
#include <RF24/RF24.h>
#include <stdio.h>

using namespace std;
RF24 radio(22,0);
const uint8_t pipes[][6] = {"1Node","2Node"};
int data, R_data, P_data;
int main(int argc, char** argv){


  cout << "RF24/examples/GettingStarted/\n";

  radio.begin();
  radio.setRetries(15,15);
  radio.printDetails();
  radio.openWritingPipe(pipes[1]);
  radio.openReadingPipe(1,pipes[0]);
  radio.startListening();

        while(1){
                if ( radio.available() ){
                        while(radio.available()){
                                radio.read( &data, sizeof(data) );
                                }
                        if(data > 200){
                                P_data = data /10;
                        }else R_data = data ;

                        printf("Handle:");
                        printf("%d " , R_data);printf("         ");
                        printf("Pedal: ");printf("%d ", P_data);printf("\n");
                        }

        } // forever loop

  return 0;
}
